"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5326],{5326:(z,C,y)=>{y.r(C),y.d(C,{startInputShims:()=>X});var M,p=y(5861),A=y(8416),v=y(5730);const I=new WeakMap,T=(e,t,n,s=0,o=!1)=>{I.has(e)!==n&&(n?K(e,t,s,o):U(e,t))},B=e=>e===e.getRootNode().activeElement,K=(e,t,n,s=!1)=>{const o=t.parentNode,i=t.cloneNode(!1);i.classList.add("cloned-input"),i.tabIndex=-1,s&&(i.disabled=!0),o.appendChild(i),I.set(e,i);const r="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform=`translate3d(${r}px,${n}px,0) scale(0)`},U=(e,t)=>{const n=I.get(e);n&&(I.delete(e),n.remove()),e.style.pointerEvents="",t.style.transform=""},F=(e,t,n)=>{if(!n||!t)return()=>{};const s=r=>{B(t)&&T(e,t,r)},o=()=>T(e,t,!1),i=()=>s(!0),a=()=>s(!1);return(0,v.a)(n,"ionScrollStart",i),(0,v.a)(n,"ionScrollEnd",a),t.addEventListener("blur",o),()=>{(0,v.b)(n,"ionScrollStart",i),(0,v.b)(n,"ionScrollEnd",a),t.removeEventListener("blur",o)}},P="input, textarea, [no-blur], [contenteditable]",H=(e,t,n)=>{var s;const o=null!==(s=e.closest("ion-item,[ion-item]"))&&void 0!==s?s:e;return W(o.getBoundingClientRect(),t.getBoundingClientRect(),n,e.ownerDocument.defaultView.innerHeight)},W=(e,t,n,s)=>{const o=e.top,i=e.bottom,a=t.top,c=a+15,m=.75*Math.min(t.bottom,s-n)-i,b=c-o,u=Math.round(m<0?-m:b>0?-b:0),S=Math.min(u,o-a),g=Math.abs(S)/.3;return{scrollAmount:S,scrollDuration:Math.min(400,Math.max(150,g)),scrollPadding:n,inputSafeY:4-(o-c)}},Y=(e,t,n,s,o,i=!1)=>{let a;const r=h=>{a=(0,v.p)(h)},c=h=>{if(!a)return;const m=(0,v.p)(h);!$(6,a,m)&&!B(t)&&G(e,t,n,s,o,i)};return e.addEventListener("touchstart",r,{capture:!0,passive:!0}),e.addEventListener("touchend",c,!0),()=>{e.removeEventListener("touchstart",r,!0),e.removeEventListener("touchend",c,!0)}},G=function(t,n,s,o,i){return(M=M||(0,p.Z)(function*(a,r,c,h,m,b=!1){if(!c&&!h)return;const u=H(a,c||h,m);if(c&&Math.abs(u.scrollAmount)<4)r.focus();else if(T(a,r,!0,u.inputSafeY,b),r.focus(),(0,v.r)(()=>a.click()),typeof window<"u"){var S;let _;const g=function f(){return(S=S||(0,p.Z)(function*(){void 0!==_&&clearTimeout(_),window.removeEventListener("ionKeyboardDidShow",d),window.removeEventListener("ionKeyboardDidShow",f),c&&(yield(0,A.c)(c,0,u.scrollAmount,u.scrollDuration)),T(a,r,!1,u.inputSafeY),r.focus()})).apply(this,arguments)},d=()=>{window.removeEventListener("ionKeyboardDidShow",d),window.addEventListener("ionKeyboardDidShow",g)};if(c){const f=yield(0,A.g)(c);if(u.scrollAmount>f.scrollHeight-f.clientHeight-f.scrollTop)return"password"===r.type?(u.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",d)):window.addEventListener("ionKeyboardDidShow",g),void(_=setTimeout(g,1e3))}g()}})).apply(this,arguments)},$=(e,t,n)=>{if(t&&n){const s=t.x-n.x,o=t.y-n.y;return s*s+o*o>e*e}return!1},x="$ionPaddingTimer",N=(e,t)=>{var n,s;if("INPUT"!==e.tagName||e.parentElement&&"ION-INPUT"===e.parentElement.tagName||"ION-SEARCHBAR"===(null===(s=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===s?void 0:s.tagName))return;const o=(0,A.f)(e);if(null===o)return;const i=o[x];i&&clearTimeout(i),t>0?o.style.setProperty("--keyboard-offset",`${t}px`):o[x]=setTimeout(()=>{o.style.setProperty("--keyboard-offset","0px")},120)},X=(e,t)=>{var n;const s=document,o="ios"===t,i="android"===t,a=e.getNumber("keyboardHeight",290),r=e.getBoolean("scrollAssist",!0),c=e.getBoolean("hideCaretOnScroll",o),h=e.getBoolean("inputBlurring",o),m=e.getBoolean("scrollPadding",!0),b=Array.from(s.querySelectorAll("ion-input, ion-textarea")),u=new WeakMap,S=new WeakMap,_=function(f){return(n=n||(0,p.Z)(function*(l){yield new Promise(D=>(0,v.c)(l,D));const O=l.shadowRoot||l,L=O.querySelector("input")||O.querySelector("textarea"),w=(0,A.f)(l),R=w?null:l.closest("ion-footer");if(L){if(w&&c&&!u.has(l)){const D=F(l,L,w);u.set(l,D)}if("date"!==L.type&&"datetime-local"!==L.type&&(w||R)&&r&&!S.has(l)){const D=Y(l,L,w,R,a,i);S.set(l,D)}}})).apply(this,arguments)};h&&(()=>{let e=!0,t=!1;const n=document;(0,v.a)(n,"ionScrollStart",()=>{t=!0}),n.addEventListener("focusin",()=>{e=!0},!0),n.addEventListener("touchend",a=>{if(t)return void(t=!1);const r=n.activeElement;if(!r||r.matches(P))return;const c=a.target;c!==r&&(c.matches(P)||c.closest(P)||(e=!1,setTimeout(()=>{e||r.blur()},50)))},!1)})(),m&&(e=>{const t=document;t.addEventListener("focusin",o=>{N(o.target,e)}),t.addEventListener("focusout",o=>{N(o.target,0)})})(a);for(const d of b)_(d);s.addEventListener("ionInputDidLoad",d=>{_(d.detail)}),s.addEventListener("ionInputDidUnload",d=>{(d=>{if(c){const f=u.get(d);f&&f(),u.delete(d)}if(r){const f=S.get(d);f&&f(),S.delete(d)}})(d.detail)})}}}]);