"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8294],{8294:($,Z,l)=>{l.r(Z),l.d(Z,{TasksModule:()=>H});var u=l(6895),_=l(8781),c=l(5861),i=l(8058),f=l(4004),n=l(4650),U=l(8534),C=l(1560),d=l(4006);function A(o,a){1&o&&(n.TgZ(0,"ion-buttons",13),n._uU(1,"\n      "),n._UZ(2,"ion-menu-button"),n._uU(3,"\n    "),n.qZA())}function k(o,a){1&o&&(n.TgZ(0,"ion-title"),n._uU(1,"Tasks"),n.qZA())}function b(o,a){if(1&o){const e=n.EpF();n.TgZ(0,"ion-searchbar",14),n.NdJ("ngModelChange",function(s){n.CHM(e);const r=n.oxw();return n.KtG(r.queryText=s)})("ionChange",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.updateList())})("ionCancel",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.showSearchbar=!1)}),n.qZA()}if(2&o){const e=n.oxw();n.Q6J("ngModel",e.queryText)}}function q(o,a){if(1&o){const e=n.EpF();n.TgZ(0,"ion-button",15),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.showSearchbar=!0)}),n._uU(1,"\n        "),n._UZ(2,"ion-icon",16),n._uU(3,"\n      "),n.qZA()}}function v(o,a){if(1&o&&(n.TgZ(0,"ion-item-sliding",null,19),n._uU(2,"\n      "),n.TgZ(3,"ion-item",20),n._uU(4,"\n        "),n.TgZ(5,"ion-label"),n._uU(6,"\n          "),n.TgZ(7,"h3"),n._uU(8),n.qZA(),n._uU(9,"\n          "),n.TgZ(10,"p"),n._uU(11),n.qZA(),n._uU(12,"\n        "),n.qZA(),n._uU(13,"\n        "),n.TgZ(14,"ion-label"),n._uU(15,"\n          "),n.TgZ(16,"p"),n._uU(17),n.qZA(),n._uU(18,"\n        "),n.qZA(),n._uU(19,"\n      "),n.qZA(),n._uU(20,"\n    "),n.qZA()),2&o){const e=a.$implicit;n.xp6(3),n.MGl("routerLink","/tasks/details/",e._id,""),n.xp6(5),n.Oqu(e.category),n.xp6(3),n.Oqu(e.description),n.xp6(6),n.Oqu(e.assigned_phone_number)}}function y(o,a){if(1&o&&(n.TgZ(0,"ion-list",null,17),n._uU(2,"\n    "),n.YNc(3,v,21,4,"ion-item-sliding",18),n._uU(4,"\n  "),n.qZA()),2&o){const e=a.ngIf;n.xp6(3),n.Q6J("ngForOf",e)}}function M(o,a){if(1&o&&(n.TgZ(0,"ion-select-option",28),n._uU(1),n.qZA()),2&o){const e=a.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}function x(o,a){if(1&o){const e=n.EpF();n._uU(0,"\n      "),n.TgZ(1,"ion-header"),n._uU(2,"\n        "),n.TgZ(3,"ion-toolbar"),n._uU(4,"\n          "),n.TgZ(5,"ion-buttons",13),n._uU(6,"\n            "),n.TgZ(7,"ion-button",15),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.cancel())}),n._uU(8,"Cancel"),n.qZA(),n._uU(9,"\n          "),n.qZA(),n._uU(10,"\n          "),n.TgZ(11,"ion-title"),n._uU(12,"Add Client"),n.qZA(),n._uU(13,"\n          "),n.TgZ(14,"ion-buttons",4),n._uU(15,"\n            "),n.TgZ(16,"ion-button",21),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.create())}),n._uU(17,"Confirm"),n.qZA(),n._uU(18,"\n          "),n.qZA(),n._uU(19,"\n        "),n.qZA(),n._uU(20,"\n      "),n.qZA(),n._uU(21,"\n      "),n.TgZ(22,"ion-content",22),n._uU(23,"\n        "),n.TgZ(24,"ion-list"),n._uU(25,"\n          "),n.TgZ(26,"ion-item"),n._uU(27,"\n          "),n.TgZ(28,"ion-label",23),n._uU(29,"Category"),n.qZA(),n._uU(30,"\n          "),n.TgZ(31,"ion-select",24),n.NdJ("ngModelChange",function(s){n.CHM(e);const r=n.oxw();return n.KtG(r.record.category=s)}),n._uU(32,"\n            "),n.YNc(33,M,2,2,"ion-select-option",25),n._uU(34,"\n          "),n.qZA(),n._uU(35,"\n        "),n.qZA(),n._uU(36,"\n\n        "),n.TgZ(37,"ion-item"),n._uU(38,"\n          "),n.TgZ(39,"ion-label",26),n._uU(40,"description"),n.qZA(),n._uU(41,"\n          "),n.TgZ(42,"ion-textarea",27),n.NdJ("ngModelChange",function(s){n.CHM(e);const r=n.oxw();return n.KtG(r.record.description=s)}),n.qZA(),n._uU(43,"\n        "),n.qZA(),n._uU(44,"\n        "),n.qZA(),n._uU(45,"\n      "),n.qZA(),n._uU(46,"\n    ")}if(2&o){const e=n.oxw();n.xp6(16),n.Q6J("strong",!0),n.xp6(15),n.Q6J("ngModel",e.record.category),n.xp6(2),n.Q6J("ngForOf",e.categories),n.xp6(9),n.Q6J("ngModel",e.record.description)}}const O=["scheduleList"];function S(o,a){1&o&&(n.TgZ(0,"ion-buttons",14),n._uU(1,"\n      "),n._UZ(2,"ion-back-button",15),n._uU(3,"\n      "),n._uU(4,"\n    "),n.qZA()),2&o&&(n.xp6(2),n.Q6J("defaultHref","/tasks"))}function N(o,a){1&o&&(n.TgZ(0,"ion-title"),n._uU(1,"Edit Task"),n.qZA())}function D(o,a){1&o&&(n.TgZ(0,"ion-title",16),n._uU(1,"Edit Task"),n.qZA())}function Y(o,a){if(1&o&&(n.TgZ(0,"ion-select-option",17),n._uU(1),n.qZA()),2&o){const e=a.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}function Q(o,a){if(1&o&&(n.TgZ(0,"ion-select-option",17),n._uU(1),n.qZA()),2&o){const e=a.$implicit;n.s9C("value",e._id),n.xp6(1),n.Oqu(e.email)}}function I(o,a){if(1&o&&(n.TgZ(0,"ion-select-option",17),n._uU(1),n.qZA()),2&o){const e=a.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}const w=[{path:"",component:(()=>{class o{constructor(e,t,s,r,g,p,h,m,T){this.alertCtrl=e,this.loadingCtrl=t,this.modalCtrl=s,this.router=r,this.routerOutlet=g,this.toastCtrl=p,this.dataService=h,this.credService=m,this.config=T,this.ios=!1,this.dayIndex=0,this.queryText="",this.segment="all",this.excludeTracks=[],this.shownSessions=[],this.groups=[],this.confDate="",this.showSearchbar=!1,this.loading=!0,this.categories=["Housing","Employment","Addiction","Documents","Other"],this.loadingOverlay=null,this.record={},this.user={},this.message="This modal example uses triggers to automatically open a modal when the button is clicked."}ngOnInit(){this.ios="ios"===this.config.get("mode"),this.updateList()}updateList(){var e=this;return(0,c.Z)(function*(){var t;e.loading=!0,e.loadingOverlay=yield e.loadingCtrl.create(),yield e.loadingOverlay.present();const s=e.credService.credentials;e.user=yield e.dataService.getRecord("users",s.profile._id),e.records$=e.dataService.records$("tasks",{assigned_user:e.user._id,$sort:{created:-1}}).pipe((0,f.U)(r=>r.data)),e.records$.subscribe(function(r){return(t=t||(0,c.Z)(function*(g){console.log(g),e.loadingOverlay.dismiss(),e.loading=!1})).apply(this,arguments)})})()}presentFilter(){}addFavorite(e,t){}removeFavorite(e,t,s){}presentAddParticipant(){}openSocial(e,t){}cancel(){this.modal.dismiss(null,"cancel")}create(){var e=this;return(0,c.Z)(function*(){e.modal.dismiss(e.name,"confirm"),e.record.assigned_user=e.user._id,yield e.dataService.createRecord("tasks",e.record)})()}onWillDismiss(e){"confirm"===e.detail.role&&(this.message=`Hello, ${e.detail.data}!`)}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(i.Br),n.Y36(i.HT),n.Y36(i.IN),n.Y36(_.F0),n.Y36(i.jP),n.Y36(i.yF),n.Y36(U.D),n.Y36(C.Cs),n.Y36(i.De))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-tasks"]],viewQuery:function(e,t){if(1&e&&n.Gf(i.ki,5),2&e){let s;n.iGM(s=n.CRH())&&(t.modal=s.first)}},decls:50,vars:8,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["showCancelButton","always","placeholder","Search",3,"ngModel","ngModelChange","ionChange","ionCancel",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen","true"],["collapse","condense"],["size","large"],["placeholder","Search",3,"ngModel","ngModelChange","ionChange"],["trigger","open-modal",3,"willDismiss"],["slot","fixed","vertical","bottom","horizontal","end","id","open-modal"],["name","add",3,"click"],["slot","start"],["showCancelButton","always","placeholder","Search",3,"ngModel","ngModelChange","ionChange","ionCancel"],[3,"click"],["slot","icon-only","name","search"],["scheduleList",""],[4,"ngFor","ngForOf"],["slidingItem",""],[3,"routerLink"],[3,"strong","click"],[1,"ion-padding"],["position","floating"],["label-placement","stacked","label","Select One","placeholder","Select One",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","stacked"],["placeholder","Describe the task",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"ion-header",0),n._uU(1,"\n  "),n.TgZ(2,"ion-toolbar"),n._uU(3,"\n    "),n.YNc(4,A,4,0,"ion-buttons",1),n._uU(5,"\n    "),n.YNc(6,k,2,0,"ion-title",2),n._uU(7,"\n    "),n.YNc(8,b,1,1,"ion-searchbar",3),n._uU(9,"\n    "),n.TgZ(10,"ion-buttons",4),n._uU(11,"\n      "),n.YNc(12,q,4,0,"ion-button",5),n._uU(13,"\n    "),n.qZA(),n._uU(14,"\n  "),n.qZA(),n._uU(15,"\n"),n.qZA(),n._uU(16,"\n\n"),n.TgZ(17,"ion-content",6),n._uU(18,"\n  "),n.TgZ(19,"ion-header",7),n._uU(20,"\n    "),n.TgZ(21,"ion-toolbar"),n._uU(22,"\n      "),n.TgZ(23,"ion-title",8),n._uU(24,"Tasks"),n.qZA(),n._uU(25,"\n    "),n.qZA(),n._uU(26,"\n    "),n.TgZ(27,"ion-toolbar"),n._uU(28,"\n      "),n.TgZ(29,"ion-searchbar",9),n.NdJ("ngModelChange",function(r){return t.queryText=r})("ionChange",function(){return t.updateList()}),n.qZA(),n._uU(30,"\n    "),n.qZA(),n._uU(31,"\n  "),n.qZA(),n._uU(32,"\n\n  "),n.YNc(33,y,5,1,"ion-list",2),n.ALo(34,"async"),n._uU(35,"\n\n  "),n.TgZ(36,"ion-modal",10),n.NdJ("willDismiss",function(r){return t.onWillDismiss(r)}),n._uU(37,"\n    "),n.YNc(38,x,47,4,"ng-template"),n._uU(39,"\n  "),n.qZA(),n._uU(40,"\n\n  "),n.TgZ(41,"ion-fab",11),n._uU(42,"\n    "),n.TgZ(43,"ion-fab-button"),n._uU(44,"\n      "),n.TgZ(45,"ion-icon",12),n.NdJ("click",function(){return t.presentAddParticipant()}),n.qZA(),n._uU(46,"\n    "),n.qZA(),n._uU(47,"\n  "),n.qZA(),n._uU(48,"\n"),n.qZA(),n._uU(49,"\n")),2&e&&(n.xp6(4),n.Q6J("ngIf",!t.showSearchbar),n.xp6(2),n.Q6J("ngIf",!t.ios&&!t.showSearchbar),n.xp6(2),n.Q6J("ngIf",t.showSearchbar),n.xp6(4),n.Q6J("ngIf",!t.ios&&!t.showSearchbar),n.xp6(17),n.Q6J("ngModel",t.queryText),n.xp6(4),n.Q6J("ngIf",n.lcZ(34,6,t.records$)))},dependencies:[u.sg,u.O5,i.YG,i.Sm,i.W2,i.IJ,i.W4,i.Gu,i.gu,i.Ie,i.td,i.Q$,i.q_,i.fG,i.VI,i.t9,i.n0,i.g2,i.wd,i.sr,i.ki,i.QI,i.j9,i.YI,d.JJ,d.On,_.rH,u.Ov]}),o})()},{path:"details/:id",component:(()=>{class o{constructor(e,t,s,r,g,p,h,m,T){this.alertCtrl=e,this.loadingCtrl=t,this.modalCtrl=s,this.router=r,this.route=g,this.routerOutlet=p,this.toastController=h,this.dataService=m,this.config=T,this.cabins=[],this.cabinCount=40,this.providers=[],this.ios=!1,this.dayIndex=0,this.queryText="",this.segment="all",this.excludeTracks=[],this.shownSessions=[],this.groups=[],this.confDate="",this.showSearchbar=!1,this.loading=!0,this.categories=["Housing","Employment","Addiction","Documents","Other"],this.statusOptions=["Not Started","In Progress","Needs Assistance","Pending Provider Assignement"],this.loadingOverlay=null,this.record={},this.user={}}ngOnInit(){for(this.ios="ios"===this.config.get("mode");this.cabins.length<this.cabinCount;)this.cabins.push(`Cabin #${this.cabins.length+1}`);this.getData()}getData(){var e=this;return(0,c.Z)(function*(){var t;e.loading=!0,e.record={},e.loadingOverlay=yield e.loadingCtrl.create(),yield e.loadingOverlay.present(),e.providers=yield e.dataService.findRecords("users",{is_provider:!0}),e.providers=e.providers.data,e.route.params.subscribe(function(s){return(t=t||(0,c.Z)(function*(r){console.log(r),e.record=yield e.dataService.getRecord("tasks",r.id),console.log(e.record),e.loading=!1,e.loadingOverlay.dismiss()})).apply(this,arguments)})})()}selectChange(){var e=this;return(0,c.Z)(function*(){try{yield e.dataService.updateRecord("tasks",e.record._id,e.record)}catch{yield(yield e.toastController.create({message:"Error saving changes",duration:3e3,color:"danger",position:"bottom"})).present()}})()}saveRecord(){var e=this;return(0,c.Z)(function*(){try{yield e.dataService.updateRecord("tasks",e.record._id,e.record),yield(yield e.toastController.create({message:"Changes Saved",duration:1500,color:"success",position:"bottom"})).present()}catch{yield(yield e.toastController.create({message:"Error saving changes",duration:3e3,color:"danger",position:"bottom"})).present()}})()}presentFilter(){}addFavorite(e,t){}removeFavorite(e,t,s){}openSocial(e,t){}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(i.Br),n.Y36(i.HT),n.Y36(i.IN),n.Y36(_.F0),n.Y36(_.gz),n.Y36(i.jP),n.Y36(i.yF),n.Y36(U.D),n.Y36(i.De))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-task-details"]],viewQuery:function(e,t){if(1&e&&n.Gf(O,7),2&e){let s;n.iGM(s=n.CRH())&&(t.scheduleList=s.first)}},decls:105,vars:11,consts:[["translucent","true"],["slot","start",4,"ngIf"],[4,"ngIf"],["fullscreen","true"],["collapse","condense"],["size","large",4,"ngIf"],["position","floating"],["label-placement","stacked","label","Select One","placeholder","Select One",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","stacked"],["placeholder","Describe the task",3,"ngModel","ngModelChange"],["placeholder","Add notes",3,"ngModel","ngModelChange"],["lines","none"],["expand","block",3,"click"],["slot","start"],[3,"defaultHref"],["size","large"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"ion-header",0),n._uU(1,"\n  "),n.TgZ(2,"ion-toolbar"),n._uU(3,"\n    "),n.YNc(4,S,5,1,"ion-buttons",1),n._uU(5,"\n    "),n.YNc(6,N,2,0,"ion-title",2),n._uU(7,"\n  "),n.qZA(),n._uU(8,"\n"),n.qZA(),n._uU(9,"\n\n"),n.TgZ(10,"ion-content",3),n._uU(11,"\n  "),n.TgZ(12,"ion-header",4),n._uU(13,"\n    "),n.TgZ(14,"ion-toolbar"),n._uU(15,"\n      "),n.YNc(16,D,2,0,"ion-title",5),n._uU(17,"\n    "),n.qZA(),n._uU(18,"\n  "),n.qZA(),n._uU(19,"\n\n  "),n.TgZ(20,"ion-card"),n._uU(21,"\n    "),n.TgZ(22,"ion-card-header"),n._uU(23,"\n      "),n.TgZ(24,"ion-card-subtitle"),n._uU(25,"Details"),n.qZA(),n._uU(26,"\n    "),n.qZA(),n._uU(27,"\n    "),n.TgZ(28,"ion-card-content"),n._uU(29,"\n      "),n.TgZ(30,"ion-list"),n._uU(31,"\n\n        "),n.TgZ(32,"ion-item"),n._uU(33,"\n          "),n.TgZ(34,"ion-label",6),n._uU(35,"Status"),n.qZA(),n._uU(36,"\n          "),n.TgZ(37,"ion-select",7),n.NdJ("ngModelChange",function(r){return t.record.status=r}),n._uU(38,"\n            "),n.YNc(39,Y,2,2,"ion-select-option",8),n._uU(40,"\n          "),n.qZA(),n._uU(41,"\n        "),n.qZA(),n._uU(42,"\n\n\n        "),n.TgZ(43,"ion-item"),n._uU(44,"\n          "),n.TgZ(45,"ion-label",6),n._uU(46,"Assigned Provider"),n.qZA(),n._uU(47,"\n          "),n.TgZ(48,"ion-select",7),n.NdJ("ngModelChange",function(r){return t.record.assigned_provider=r}),n._uU(49,"\n            "),n.YNc(50,Q,2,2,"ion-select-option",8),n._uU(51,"\n          "),n.qZA(),n._uU(52,"\n        "),n.qZA(),n._uU(53,"\n\n\n        "),n.TgZ(54,"ion-item"),n._uU(55,"\n          "),n.TgZ(56,"ion-label",6),n._uU(57,"Category"),n.qZA(),n._uU(58,"\n          "),n.TgZ(59,"ion-select",7),n.NdJ("ngModelChange",function(r){return t.record.category=r}),n._uU(60,"\n            "),n.YNc(61,I,2,2,"ion-select-option",8),n._uU(62,"\n          "),n.qZA(),n._uU(63,"\n        "),n.qZA(),n._uU(64,"\n\n\n    \n        "),n.TgZ(65,"ion-item"),n._uU(66,"\n          "),n.TgZ(67,"ion-label",9),n._uU(68,"Description"),n.qZA(),n._uU(69,"\n          "),n.TgZ(70,"ion-textarea",10),n.NdJ("ngModelChange",function(r){return t.record.description=r}),n.qZA(),n._uU(71,"\n        "),n.qZA(),n._uU(72,"\n      "),n.qZA(),n._uU(73,"\n    "),n.qZA(),n._uU(74,"\n  "),n.qZA(),n._uU(75,"\n\n  "),n.TgZ(76,"ion-card"),n._uU(77,"\n    "),n.TgZ(78,"ion-card-header"),n._uU(79,"\n      "),n.TgZ(80,"ion-card-subtitle"),n._uU(81,"Notes"),n.qZA(),n._uU(82,"\n    "),n.qZA(),n._uU(83,"\n    "),n.TgZ(84,"ion-card-content"),n._uU(85,"\n      "),n.TgZ(86,"ion-list"),n._uU(87,"\n        "),n.TgZ(88,"ion-item"),n._uU(89,"\n          "),n.TgZ(90,"ion-label",9),n._uU(91,"Notes"),n.qZA(),n._uU(92,"\n          "),n.TgZ(93,"ion-textarea",11),n.NdJ("ngModelChange",function(r){return t.record.notes=r}),n.qZA(),n._uU(94,"\n        "),n.qZA(),n._uU(95,"\n      "),n.qZA(),n._uU(96,"\n      "),n._UZ(97,"ion-item",12),n._uU(98,"\n      "),n.TgZ(99,"ion-button",13),n.NdJ("click",function(){return t.saveRecord()}),n._uU(100,"Save"),n.qZA(),n._uU(101,"\n    "),n.qZA(),n._uU(102,"\n  "),n.qZA(),n._uU(103,"\n\n"),n.qZA(),n._uU(104,"\n")),2&e&&(n.xp6(4),n.Q6J("ngIf",!t.showSearchbar),n.xp6(2),n.Q6J("ngIf",!t.ios&&!t.showSearchbar&&!t.loading),n.xp6(10),n.Q6J("ngIf",!t.loading),n.xp6(21),n.Q6J("ngModel",t.record.status),n.xp6(2),n.Q6J("ngForOf",t.statusOptions),n.xp6(9),n.Q6J("ngModel",t.record.assigned_provider),n.xp6(2),n.Q6J("ngForOf",t.providers),n.xp6(9),n.Q6J("ngModel",t.record.category),n.xp6(2),n.Q6J("ngForOf",t.categories),n.xp6(9),n.Q6J("ngModel",t.record.description),n.xp6(23),n.Q6J("ngModel",t.record.notes))},dependencies:[u.sg,u.O5,i.oU,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.W2,i.Gu,i.Ie,i.Q$,i.q_,i.t9,i.n0,i.g2,i.wd,i.sr,i.QI,i.j9,i.cs,d.JJ,d.On]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[_.Bz.forChild(w),_.Bz]}),o})();var G=l(6430);let H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[u.ez,G.m8,i.Pc,d.u5,d.UX,F]}),o})()}}]);